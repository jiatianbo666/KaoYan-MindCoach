# DDL 紧张分数功能说明

## 🎯 功能概述

为学习日历添加智能的 DDL 紧张分数系统，通过颜色直观显示任务的紧急程度。

---

## 🎨 7档颜色系统

| 分数范围 | 颜色 | 色值 | 等级 | 建议 |
|---------|------|------|------|------|
| 0-14 | 🔵 蓝色 | `#64b5f6` | 很轻松 | 时间充裕，保持节奏 |
| 15-29 | 🔷 青色 | `#4dd0e1` | 轻松 | 进度不错，按部就班 |
| 30-44 | 🟢 绿色 | `#81c784` | 进度良好 | 继续保持 |
| 45-59 | 🟡 黄色 | `#ffd54f` | 需要关注 | 建议制定详细计划 |
| 60-74 | 🟠 橙色 | `#ffb74d` | 较紧张 | 建议增加学习时间 |
| 75-89 | 🔴 红色 | `#ef5350` | 很紧张 | 时间紧迫！抓紧时间 |
| 90-100 | 🟤 褐色 | `#8d6e63` | 极度紧急 | 必须立即全力冲刺！ |

---

## 💡 使用方法

### 1. 创建任务
1. 点击日历上的某一天（这天就是 DDL）
2. 填写任务描述
3. 设置当前进度（0-100%）
4. 保存

### 2. 查看紧张分数
- 整个日期方块会填充对应的紧张分数颜色
- 右下角显示分数数字
- 点击日期查看详细信息和建议

### 3. 更新进度
- 点击已有任务的日期
- 调整进度滑块
- 保存后自动重新计算紧张分数

---

## 🧮 计算算法

紧张分数综合考虑：
1. **时间因素**：今天离 DDL 还有多少天
2. **进度因素**：当前完成了多少

**核心逻辑：**
```
紧张分数 = 时间紧张度 × 权重A + 进度紧张度 × 权重B

- 正常情况：时间权重 50%，进度权重 50%
- 最后 7 天：时间权重 70%，进度权重 30%
```

**特殊情况：**
- 进度 = 100% → 分数 = 0
- 已过期且未完成 → 分数 = 100

---

## 📝 示例场景

| DDL剩余 | 进度 | 紧张分数 | 颜色 | 等级 |
|---------|-----|---------|------|------|
| 28天 | 70% | ~12 | 🔵 蓝色 | 很轻松 |
| 20天 | 60% | ~25 | 🔷 青色 | 轻松 |
| 15天 | 50% | ~38 | 🟢 绿色 | 良好 |
| 10天 | 40% | ~52 | 🟡 黄色 | 需关注 |
| 7天 | 30% | ~68 | 🟠 橙色 | 较紧张 |
| 3天 | 25% | ~82 | 🔴 红色 | 很紧张 |
| 1天 | 15% | ~92 | 🟤 褐色 | 极度紧急 |

---

## 🎨 界面设计

**日历背景：** 浅紫色渐变 (`#e8dff5` → `#d4c5e8`)
**任务方块：** 整个背景填充紧张分数颜色
**文字颜色：** 有任务时白色，无任务时深色
**今日标记：** 红色边框 + "今"字标签

---

## 🚀 快速测试

1. 打开日历页面
2. 点击一个未来的日期
3. 填写任务和进度（例如：进度 30%）
4. 保存
5. 查看方块颜色变化

---

## 📁 相关文件

**后端：**
- `backend/app/models/calendar_note.py` - 数据库模型
- `backend/app/routers/calendar_notes.py` - API 和算法
- `backend/migrate_add_stress_score.py` - 数据库迁移脚本

**前端：**
- `frontend/src/components/InteractiveCalendar.vue` - 日历组件
- `frontend/src/utils/stressScoreHelper.js` - 辅助函数

---

## 💡 小贴士

- **及时更新进度**：分数会更准确
- **关注高分任务**：优先处理红色和褐色任务
- **合理规划**：避免过多高分任务同时存在

---

更多信息请查看：
- `给其他开发者的说明.md` - 部署和协作指南
- `DDL紧张分数-简化版使用说明.md` - 详细使用说明
